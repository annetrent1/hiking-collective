<p-dialog
  header="{{ isNewGroup ? 'Add Group' : 'Edit Group' }}"
  [(visible)]="visible"
  (onHide)="closeModal()"
>
  <form
    [formGroup]="groupForm"
    (ngSubmit)="
      isNewGroup ? onSubmit(groupForm.value) : onUpdate(groupForm.value)
    "
    class="flex flex-column gap-3"
    novalidate
  >
    <span class="flex flex-column">
      <label for="state-name">State: </label>
      <p-dropdown
        id="state-name"
        [options]="states"
        formControlName="StateName"
        placeholder="Select a State"
        [showClear]="true"
      ></p-dropdown>
    </span>
    <span class="flex flex-column">
      <label for="group-name">Hiking group name: </label>
      <input
        id="GroupName"
        name="GroupName"
        pInputText
        type="text"
        formControlName="GroupName"
        required
      />
      <label
        for="GroupName"
        class="validate"
        *ngIf="
          groupForm.errors?.['GroupName'] &&
          (groupForm.errors?.['GroupName'].dirty || groupForm.errors?.['GroupName'].touched)
        "
        >Please enter group name.</label
      >
    </span>
    <span class="flex flex-column">
      <label for="group-name">Max group size</label>
      <p-inputNumber
        formControlName="MaxGroupSize"
        [min]="0"
        [max]="50"
        [showButtons]="true"
      ></p-inputNumber>
    </span>
    <p-divider align="left"><p>Hiking Lead Information</p></p-divider>
    <span class="flex flex-column">
      <label for="group-name">Name: </label>
      <input
        id="group-name"
        pInputText
        type="text"
        formControlName="SponsorName"
      />
    </span>
    <span class="flex flex-column">
      <label for="group-name">Phone Number</label>
      <input
        id="group-name"
        pInputText
        type="text"
        formControlName="SponsorPhone"
      />
    </span>
    <span class="flex flex-column">
      <label for="group-name">Email</label>
      <input
        id="group-name"
        pInputText
        type="text"
        formControlName="SponsorEmail"
      />
    </span>
    <div class="flex justify-content-between">
      <div>
        <button
          *ngIf="!isNewGroup"
          pButton
          type="button"
          (click)="deleteGroup($event)"
          label="Delete"
          class="p-button-danger"
        ></button>
      </div>
      <div class="flex gap-1">
        <button
          pButton
          type="reset"
          (click)="closeModal()"
          label="Cancel"
          class="p-button-secondary"
        ></button>
        <button
          pButton
          type="submit"
          label="{{ isNewGroup ? 'Add Group' : 'Save' }}"
        ></button>
      </div>
    </div>
    <p-confirmPopup></p-confirmPopup>
  </form>
</p-dialog>
